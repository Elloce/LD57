[gd_scene load_steps=50 format=3 uid="uid://bthaby2mladi3"]

[ext_resource type="Script" path="res://script/character_body_3d.gd" id="1_6cigd"]
[ext_resource type="Script" path="res://script/main.gd" id="1_t7i6o"]
[ext_resource type="Script" path="res://script/ray_cast_3d.gd" id="3_4nc0y"]
[ext_resource type="Script" path="res://script/resource_pile.gd" id="3_gv1ur"]
[ext_resource type="PackedScene" uid="uid://bqdt0spt5r7e7" path="res://lever.tscn" id="4_f864p"]
[ext_resource type="PackedScene" uid="uid://ptfwaumj5j5t" path="res://item.tscn" id="4_q3dbg"]
[ext_resource type="Script" path="res://script/furnace.gd" id="4_xxfmu"]
[ext_resource type="Script" path="res://script/area_placer.gd" id="6_vvjpg"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_1pfqr"]
sky_horizon_color = Color(0.64625, 0.65575, 0.67075, 1)
ground_horizon_color = Color(0.64625, 0.65575, 0.67075, 1)

[sub_resource type="Sky" id="Sky_wxp6s"]
sky_material = SubResource("ProceduralSkyMaterial_1pfqr")

[sub_resource type="Environment" id="Environment_24ix1"]
background_mode = 2
sky = SubResource("Sky_wxp6s")
tonemap_mode = 2
glow_enabled = true

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_u3pod"]
radius = 0.29117

[sub_resource type="BoxShape3D" id="BoxShape3D_kv0bm"]

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_5g1pl"]
emission_shape_scale = Vector3(0.53, 0.265, 0.26)
emission_shape = 1
emission_sphere_radius = 1.0
gravity = Vector3(0, 2, 0)
linear_accel_min = -3.68
linear_accel_max = 2.94

[sub_resource type="VisualShaderNodeFloatParameter" id="VisualShaderNodeFloatParameter_khc5v"]
parameter_name = "PanSpeed"
hint = 1

[sub_resource type="VisualShaderNodeTexture2DParameter" id="VisualShaderNodeTexture2DParameter_ck8jq"]
parameter_name = "Texture2DParameter"

[sub_resource type="VisualShaderNodeTexture" id="VisualShaderNodeTexture_5hfrl"]
source = 5

[sub_resource type="VisualShaderNodeColorParameter" id="VisualShaderNodeColorParameter_is8jo"]
parameter_name = "ColorParameter"

[sub_resource type="VisualShaderNodeColorParameter" id="VisualShaderNodeColorParameter_qy5rf"]
parameter_name = "ColorParameter2"

[sub_resource type="VisualShaderNodeUVFunc" id="VisualShaderNodeUVFunc_04ydl"]

[sub_resource type="VisualShaderNodeMix" id="VisualShaderNodeMix_n7jou"]
default_input_values = [0, Vector3(0, 0, 0), 1, Vector3(1, 1, 1), 2, Vector3(0.5, 0.5, 0.5)]
op_type = 3

[sub_resource type="VisualShaderNodeInput" id="VisualShaderNodeInput_ugwk4"]
input_name = "time"

[sub_resource type="VisualShaderNodeFloatOp" id="VisualShaderNodeFloatOp_6n1sr"]
operator = 2

[sub_resource type="VisualShader" id="VisualShader_x3juo"]
code = "shader_type spatial;
render_mode blend_mix, depth_draw_opaque, cull_back, diffuse_lambert, specular_schlick_ggx;

uniform vec4 ColorParameter : source_color;
uniform vec4 ColorParameter2 : source_color;
uniform float PanSpeed : hint_range(0, 1);
uniform sampler2D Texture2DParameter;



void fragment() {
// ColorParameter:4
	vec4 n_out4p0 = ColorParameter;


// ColorParameter:5
	vec4 n_out5p0 = ColorParameter2;


// Input:8
	float n_out8p0 = TIME;


// FloatParameter:10
	float n_out10p0 = PanSpeed;


// FloatOp:9
	float n_out9p0 = n_out8p0 * n_out10p0;


// UVFunc:6
	vec2 n_in6p1 = vec2(1.00000, 1.00000);
	vec2 n_out6p0 = vec2(n_out9p0) * n_in6p1 + UV;


	vec4 n_out3p0;
// Texture2D:3
	n_out3p0 = texture(Texture2DParameter, n_out6p0);


// Mix:7
	vec3 n_out7p0 = mix(vec3(n_out4p0.xyz), vec3(n_out5p0.xyz), vec3(n_out3p0.xyz));


// Output:0
	ALBEDO = n_out7p0;


}
"
graph_offset = Vector2(-1107.95, -242.353)
nodes/fragment/0/position = Vector2(740, 80)
nodes/fragment/2/node = SubResource("VisualShaderNodeTexture2DParameter_ck8jq")
nodes/fragment/2/position = Vector2(-640, 40)
nodes/fragment/3/node = SubResource("VisualShaderNodeTexture_5hfrl")
nodes/fragment/3/position = Vector2(-120, -40)
nodes/fragment/4/node = SubResource("VisualShaderNodeColorParameter_is8jo")
nodes/fragment/4/position = Vector2(-640, 380)
nodes/fragment/5/node = SubResource("VisualShaderNodeColorParameter_qy5rf")
nodes/fragment/5/position = Vector2(-640, 580)
nodes/fragment/6/node = SubResource("VisualShaderNodeUVFunc_04ydl")
nodes/fragment/6/position = Vector2(-540, -160)
nodes/fragment/7/node = SubResource("VisualShaderNodeMix_n7jou")
nodes/fragment/7/position = Vector2(320, 200)
nodes/fragment/8/node = SubResource("VisualShaderNodeInput_ugwk4")
nodes/fragment/8/position = Vector2(-1120, -180)
nodes/fragment/9/node = SubResource("VisualShaderNodeFloatOp_6n1sr")
nodes/fragment/9/position = Vector2(-760, -120)
nodes/fragment/10/node = SubResource("VisualShaderNodeFloatParameter_khc5v")
nodes/fragment/10/position = Vector2(-1140, -60)
nodes/fragment/connections = PackedInt32Array(2, 0, 3, 2, 6, 0, 3, 0, 7, 0, 0, 0, 3, 0, 7, 2, 4, 0, 7, 0, 5, 0, 7, 1, 8, 0, 9, 0, 9, 0, 6, 2, 10, 0, 9, 1)

[sub_resource type="FastNoiseLite" id="FastNoiseLite_w482f"]

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_lpp1q"]
noise = SubResource("FastNoiseLite_w482f")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_06k2v"]
render_priority = 0
shader = SubResource("VisualShader_x3juo")
shader_parameter/ColorParameter = Color(1, 0, 0, 1)
shader_parameter/ColorParameter2 = Color(1, 0.533333, 0, 1)
shader_parameter/PanSpeed = 0.708
shader_parameter/Texture2DParameter = SubResource("NoiseTexture2D_lpp1q")

[sub_resource type="PrismMesh" id="PrismMesh_qi0yy"]
material = SubResource("ShaderMaterial_06k2v")
size = Vector3(0.395, 0.325, 0.07)

[sub_resource type="VisualShaderNodeColorParameter" id="VisualShaderNodeColorParameter_2ag6q"]
parameter_name = "ColorParameter"

[sub_resource type="VisualShaderNodeFloatParameter" id="VisualShaderNodeFloatParameter_ppgk0"]
parameter_name = "FloatParameter"
hint = 1

[sub_resource type="VisualShader" id="VisualShader_x0vjy"]
code = "shader_type spatial;
render_mode blend_mix, depth_draw_opaque, cull_back, diffuse_lambert, specular_schlick_ggx;

uniform vec4 ColorParameter : source_color;
uniform float FloatParameter : hint_range(0, 1);



void fragment() {
// ColorParameter:2
	vec4 n_out2p0 = ColorParameter;


// FloatParameter:3
	float n_out3p0 = FloatParameter;


// Output:0
	ALBEDO = vec3(n_out2p0.xyz);
	ALPHA = n_out3p0;


}
"
graph_offset = Vector2(-101, 158)
nodes/fragment/0/position = Vector2(580, 120)
nodes/fragment/2/node = SubResource("VisualShaderNodeColorParameter_2ag6q")
nodes/fragment/2/position = Vector2(60, 60)
nodes/fragment/3/node = SubResource("VisualShaderNodeFloatParameter_ppgk0")
nodes/fragment/3/position = Vector2(60, 240)
nodes/fragment/connections = PackedInt32Array(2, 0, 0, 0, 3, 0, 0, 1)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_24ix1"]
render_priority = 0
shader = SubResource("VisualShader_x0vjy")
shader_parameter/ColorParameter = Color(1, 0, 1, 1)
shader_parameter/FloatParameter = 0.647

[sub_resource type="SphereMesh" id="SphereMesh_8mud2"]
material = SubResource("ShaderMaterial_24ix1")

[sub_resource type="SphereShape3D" id="SphereShape3D_uoq4n"]

[sub_resource type="VisualShaderNodeColorParameter" id="VisualShaderNodeColorParameter_v1dlv"]
parameter_name = "ColorParameter"

[sub_resource type="VisualShaderNodeColorParameter" id="VisualShaderNodeColorParameter_fkxn4"]
parameter_name = "ColorParameter2"

[sub_resource type="VisualShaderNodeTexture2DParameter" id="VisualShaderNodeTexture2DParameter_ap102"]
parameter_name = "Texture2DParameter"

[sub_resource type="VisualShaderNodeTexture" id="VisualShaderNodeTexture_tj6fx"]
source = 5

[sub_resource type="VisualShaderNodeMix" id="VisualShaderNodeMix_s5fy0"]
default_input_values = [0, Vector3(0, 0, 0), 1, Vector3(1, 1, 1), 2, Vector3(0.5, 0.5, 0.5)]
op_type = 3

[sub_resource type="VisualShader" id="VisualShader_ftulp"]
code = "shader_type spatial;
render_mode blend_mix, depth_draw_opaque, cull_back, diffuse_lambert, specular_schlick_ggx;

uniform vec4 ColorParameter2 : source_color;
uniform vec4 ColorParameter : source_color;
uniform sampler2D Texture2DParameter;



void fragment() {
// ColorParameter:3
	vec4 n_out3p0 = ColorParameter2;


// ColorParameter:2
	vec4 n_out2p0 = ColorParameter;


	vec4 n_out5p0;
// Texture2D:5
	n_out5p0 = texture(Texture2DParameter, UV);


// Mix:6
	vec3 n_out6p0 = mix(vec3(n_out3p0.xyz), vec3(n_out2p0.xyz), vec3(n_out5p0.xyz));


// Output:0
	ALBEDO = n_out6p0;


}
"
nodes/fragment/0/position = Vector2(560, 160)
nodes/fragment/2/node = SubResource("VisualShaderNodeColorParameter_v1dlv")
nodes/fragment/2/position = Vector2(-60, 380)
nodes/fragment/3/node = SubResource("VisualShaderNodeColorParameter_fkxn4")
nodes/fragment/3/position = Vector2(240, 380)
nodes/fragment/4/node = SubResource("VisualShaderNodeTexture2DParameter_ap102")
nodes/fragment/4/position = Vector2(-400, 180)
nodes/fragment/5/node = SubResource("VisualShaderNodeTexture_tj6fx")
nodes/fragment/5/position = Vector2(-60, 180)
nodes/fragment/6/node = SubResource("VisualShaderNodeMix_s5fy0")
nodes/fragment/6/position = Vector2(280, 140)
nodes/fragment/connections = PackedInt32Array(4, 0, 5, 2, 6, 0, 0, 0, 5, 0, 6, 2, 2, 0, 6, 1, 3, 0, 6, 0)

[sub_resource type="FastNoiseLite" id="FastNoiseLite_juhcg"]

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_4127d"]
noise = SubResource("FastNoiseLite_juhcg")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_2bodo"]
render_priority = 0
shader = SubResource("VisualShader_ftulp")
shader_parameter/ColorParameter2 = Color(0.1419, 0.33, 0.15444, 1)
shader_parameter/ColorParameter = Color(0.36, 0.1824, 0.072, 1)
shader_parameter/Texture2DParameter = SubResource("NoiseTexture2D_4127d")

[sub_resource type="SphereShape3D" id="SphereShape3D_wkgok"]
radius = 0.993777

[sub_resource type="Curve" id="Curve_ixyo1"]
_data = [Vector2(0, 0.967033), 0.0, 1.4, 0, 0, Vector2(0.241525, 0.494505), -3.14914, -3.14914, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 3

[sub_resource type="CurveTexture" id="CurveTexture_7vfbh"]
curve = SubResource("Curve_ixyo1")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_augdv"]
particle_flag_rotate_y = true
emission_shape_scale = Vector3(0.28, 0.205, 0.39)
emission_shape = 3
emission_box_extents = Vector3(1, 1, 1)
gravity = Vector3(0, 1.5, 0)
linear_accel_min = 0.499998
linear_accel_max = 2.0
scale_min = 0.5
scale_max = 1.5
scale_curve = SubResource("CurveTexture_7vfbh")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_d6oxc"]
albedo_color = Color(0.24, 0.24, 0.24, 1)

[sub_resource type="PrismMesh" id="PrismMesh_tkc05"]
material = SubResource("StandardMaterial3D_d6oxc")
size = Vector3(0.19, 0.14, 0.185)

[node name="Main" type="Node3D"]
script = ExtResource("1_t7i6o")

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_24ix1")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.866025, -0.433013, 0.25, 0, 0.5, 0.866025, -0.5, 0.75, -0.433013, 0, 0, 0)
shadow_enabled = true

[node name="CSGCombiner3D" type="CSGCombiner3D" parent="."]
use_collision = true

[node name="CSGBox3D" type="CSGBox3D" parent="CSGCombiner3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1.34382, 0)
size = Vector3(30, 1.41236, 30)

[node name="CSGBox3D2" type="CSGBox3D" parent="CSGCombiner3D"]
operation = 2
size = Vector3(29, 3.877, 29)

[node name="Player" type="CharacterBody3D" parent="."]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 2.22773, -0.9385, -1.11927)
script = ExtResource("1_6cigd")
Move_Speed = 5.0
metadata/_edit_group_ = true

[node name="CollisionShape3D" type="CollisionShape3D" parent="Player"]
shape = SubResource("CapsuleShape3D_u3pod")

[node name="Node3D" type="Node3D" parent="Player"]
transform = Transform3D(1, 1.60103e-08, 3.03763e-09, -1.60103e-08, 0.930507, 0.366274, 3.03763e-09, -0.366274, 0.930507, 0, 0.455142, 0)

[node name="Camera3D" type="Camera3D" parent="Player/Node3D"]

[node name="Marker3D" type="Marker3D" parent="Player/Node3D"]
transform = Transform3D(1, 0, 0, 0, 0.7694, -0.638768, 0, 0.638768, 0.7694, 0, -0.173173, -1.21835)

[node name="RayCast3D" type="RayCast3D" parent="Player/Node3D" node_paths=PackedStringArray("player")]
target_position = Vector3(0, 0, -2)
script = ExtResource("3_4nc0y")
player = NodePath("../..")

[node name="Furnace" type="CSGCombiner3D" parent="."]
transform = Transform3D(0.0357368, 0, -0.999361, 0, 1, 0, 0.999361, 0, 0.0357368, 0, -1.24273, 0)
use_collision = true
script = ExtResource("4_xxfmu")

[node name="Factory" type="CSGBox3D" parent="Furnace"]
size = Vector3(3.38257, 1.52148, 1.86035)

[node name="CSGBox3D2" type="CSGBox3D" parent="Furnace/Factory"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.00412271, 0, -0.808943)
operation = 2

[node name="CSGCylinder3D" type="CSGCylinder3D" parent="Furnace/Factory"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.419036, 1.42163, 0.374001)

[node name="CSGCylinder3D2" type="CSGCylinder3D" parent="Furnace/Factory"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.434685, 1.42163, 0.373252)

[node name="StaticBody3D" type="Area3D" parent="Furnace"]
collision_layer = 0

[node name="CollisionShape3D" type="CollisionShape3D" parent="Furnace/StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.00539892, 0.0104603, -0.425127)
shape = SubResource("BoxShape3D_kv0bm")

[node name="GPUParticles3D" type="GPUParticles3D" parent="Furnace"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0192353, -0.266122, -0.537905)
emitting = false
amount = 32
lifetime = 0.5
explosiveness = 0.48
fixed_fps = 60
process_material = SubResource("ParticleProcessMaterial_5g1pl")
draw_pass_1 = SubResource("PrismMesh_qi0yy")

[node name="Lever" parent="Furnace" instance=ExtResource("4_f864p")]
transform = Transform3D(-0.6, 0, -9.12696e-08, 0, 0.6, 0, 9.12696e-08, 0, -0.6, -0.974191, 0.229158, -0.938274)

[node name="AreaPlacer" type="Area3D" parent="Furnace" node_paths=PackedStringArray("instances")]
script = ExtResource("6_vvjpg")
instances = NodePath("../Instances")
scene = ExtResource("4_q3dbg")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Furnace/AreaPlacer"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0)
visible = false
mesh = SubResource("SphereMesh_8mud2")
skeleton = NodePath("../..")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Furnace/AreaPlacer"]
shape = SubResource("SphereShape3D_uoq4n")

[node name="Instances" type="Node3D" parent="Furnace"]

[node name="Label3D" type="Label3D" parent="Furnace"]
transform = Transform3D(-1, 0, -8.9407e-08, 0, 1, 0, 8.9407e-08, 0, -1, 1.29356, 0.58828, -0.994105)
text = "test"

[node name="ResourcePile" type="StaticBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1.98015, -5.05485)
script = ExtResource("3_gv1ur")

[node name="CSGSphere3D" type="CSGSphere3D" parent="ResourcePile"]
radius = 0.952415
material = SubResource("ShaderMaterial_2bodo")

[node name="CollisionShape3D" type="CollisionShape3D" parent="ResourcePile"]
shape = SubResource("SphereShape3D_wkgok")

[node name="GPUParticles3D" type="GPUParticles3D" parent="ResourcePile"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.921656, 0)
emitting = false
amount = 16
preprocess = 17.17
explosiveness = 1.0
fixed_fps = 60
process_material = SubResource("ParticleProcessMaterial_augdv")
draw_pass_1 = SubResource("PrismMesh_tkc05")

[node name="RigidBody3D" parent="." instance=ExtResource("4_q3dbg")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3.17613, 0, 0)

[node name="Items" type="Node3D" parent="."]
